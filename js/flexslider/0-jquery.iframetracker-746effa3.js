!function($){$.fn.iframeTracker=function(handler){$.iframeTracker.handlersList.push(handler),$(this).bind("mouseover",{handler:handler},function(e){e.data.handler.over=!0;try{e.data.handler.overCallback(this)}catch(ex){}}).bind("mouseout",{handler:handler},function(e){e.data.handler.over=!1,$.iframeTracker.focusRetriever.focus();try{e.data.handler.outCallback(this)}catch(ex){}})},$.iframeTracker={focusRetriever:null,focusRetrieved:!1,handlersList:[],isIE8AndOlder:!1,init:function(){try{1==$.browser.msie&&$.browser.version<9&&(this.isIE8AndOlder=!0)}catch(ex){try{var matches=navigator.userAgent.match(/(msie) ([\w.]+)/i);matches[2]<9&&(this.isIE8AndOlder=!0)}catch(ex2){}}if($(window).focus(),$(window).blur(function(e){$.iframeTracker.windowLoseFocus(e)}),$("body").append('<div style="position:fixed; top:0; left:0; overflow:hidden;"><input style="position:absolute; left:-300px;" type="text" value="" id="focus_retriever" readonly="true" /></div>'),this.focusRetriever=$("#focus_retriever"),this.focusRetrieved=!1,$(document).mousemove(function(){document.activeElement&&"IFRAME"==document.activeElement.tagName&&($.iframeTracker.focusRetriever.focus(),$.iframeTracker.focusRetrieved=!0)}),this.isIE8AndOlder&&this.focusRetriever.blur(function(e){e.stopPropagation(),e.preventDefault(),$.iframeTracker.windowLoseFocus(e)}),this.isIE8AndOlder){$("body").click(function(){$(window).focus()}),$("form").click(function(e){e.stopPropagation()});try{$("body").on("click","form",function(e){e.stopPropagation()})}catch(ex){console.log("[iframeTracker] Please update jQuery to 1.7 or newer. (exception: "+ex.message+")")}}},windowLoseFocus:function(){for(var i in this.handlersList)if(1==this.handlersList[i].over)try{this.handlersList[i].blurCallback()}catch(ex){}}},$(document).ready(function(){$.iframeTracker.init()})}(jQuery);